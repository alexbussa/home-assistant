type: custom:mod-card
card_mod:
  style: |
    :host {
      --masonry-view-card-margin: 0;
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 301px;
    }
view_layout:
  grid-area: content
card:
  type: vertical-stack
  cards:
    - type: custom:mod-card
      card_mod:
        style: |
          :host {
            padding: 28px 28px 0 0;
            align-self: end;
            --vertical-stack-card-margin: 0;
          }
      card:
        type: horizontal-stack
        cards:
          - type: custom:button-card
            template: badge_home
            entity: sensor.dashboard_current_mode
          - type: custom:button-card
            template: badge_home
            entity: sensor.dashboard_home_state
    - type: "custom:homekit-card"
      style: |
        :host {
          --vertical-stack-card-margin: 0;
          --tile-background: rgba(135, 135, 135, 0.3);
          --tile-name-text-color: rgba(255, 255, 255, 0.6);
          --tile-state-text-color: rgba(255, 255, 255, 0.6);
          --tile-icon-color: rgba(255, 255, 255, 0.6);
          --tile-on-icon-color: rgba(0, 0, 0, 0.6);
        }
        .container {
          padding: 5px 0 5px 32px !important;
          font-family: var(--primary-font-family);
        }
        homekit-button.custom-card {
          background-color: inherit !important;
        }
        homekit-button.custom-card.graph {
          box-shadow: none;
        }
        homekit-button.custom-card button-card {
          margin: -10px;
        }
        homekit-button.custom-card webrtc-camera {
          margin: -10px;
        }
        homekit-button.custom-card hui-picture-entity-card {
          margin: -10px;
          margin-top: -25px;
        }
        homekit-button.custom-card mini-graph-card {
          display: block;
          margin: -10px;
          height: calc(100% + 20px);
        }
        homekit-button.custom-card mini-graph-card ha-card {
          height: 100%;
        }
        homekit-button button-card {
          max-width: inherit !important;
        }
        homekit-button .icon {
          line-height: calc(var(--tile-icon-size, 30px) + 2px) !important;
          text-align: inherit !important;
        }
        homekit-button .icon.climate {
          line-height: calc(var(--tile-icon-size, 30px) + 15px) !important;
          text-align: center !important;
        }
        homekit-button .name {
          font-size: 15px !important;
        }
        homekit-button .state {
          height: 20px;
        }
        .card-title {
          font-size: 24px !important;
          font-weight: 300 !important;
          padding-top: 52px !important;
          padding-bottom: 16px;
        }
        .card-title:first-child {
          padding-top: 4px !important;
        }
        .col:first-child {
          padding-left: 0 !important;
        }
      enableColumns: true
      rows:
        - row: 1
          columns:
            - column: 1
              tileOnRow: 2
              entities:
                - title: Climate
                  entities:
                    - card: custom:button-card
                      cardOptions:
                        template: thermostat
                        entity: sensor.downstairs_thermostat_hvac_state
                        triggers_update:
                          - climate.downstairs
                        name: Downstairs
                        variables:
                          thermostat: climate.downstairs
                      conditionalClass: '[[[ return "custom-card" ]]]'
                      tap_action:
                        action: none
                    - card: custom:button-card
                      cardOptions:
                        template: thermostat
                        entity: sensor.upstairs_thermostat_hvac_state
                        triggers_update:
                          - climate.upstairs
                        name: Upstairs
                        variables:
                          thermostat: climate.upstairs
                      conditionalClass: '[[[ return "custom-card" ]]]'
                      tap_action:
                        action: none
                    - card: custom:button-card
                      cardOptions:
                        template: base
                        entity: sensor.first_light
                      conditionalClass: '[[[ return "custom-card" ]]]'
                      hide: '[[[ return states["sensor.first_light_show"].state == "off" ]]]'
                      tap_action:
                        action: none
                    - card: custom:button-card
                      cardOptions:
                        template: base
                        entity: sensor.golden_hour
                      conditionalClass: '[[[ return "custom-card" ]]]'
                      hide: '[[[ return states["sensor.first_light_show"].state == "on" ]]]'
                      tap_action:
                        action: none
                    - card: custom:button-card
                      cardOptions:
                        template: air_quality
                        entity: sensor.u_s_air_quality_index
                      conditionalClass: '[[[ return "custom-card" ]]]'
                      tap_action:
                        action: none
            - column: 2
              tileOnRow: 2
              entities:
                - title: Upcoming
                  entities:
                    - card: custom:button-card
                      cardOptions:
                        template: base
                        entity: sensor.trash_pickup
                        state_display: '[[[ return entity.attributes.date ]]]'
                      conditionalClass: '[[[ return "custom-card" ]]]'
                      tap_action:
                        action: none
                    - card: custom:button-card
                      cardOptions:
                        template: base
                        entity: sensor.recycling_pickup
                        state_display: '[[[ return entity.attributes.date ]]]'
                      conditionalClass: '[[[ return "custom-card" ]]]'
                      tap_action:
                        action: none
                    - card: custom:button-card
                      cardOptions:
                        template: base
                        entity: sensor.house_cleaning
                        state_display: '[[[ return entity.attributes.date ]]]'
                      conditionalClass: '[[[ return "custom-card" ]]]'
                      tap_action:
                        action: none
        - row: 2
          columns:
            - column: 1
              entities:
                - title: Front Door
                  entities:
                    - card: custom:button-card
                      cardOptions:
                        template: camera_home
                      wider: true
                      widerSize: 3
                      higher: true
                      higherSize: 2
                      conditionalClass: '[[[ return "custom-card" ]]]'
                      tap_action:
                        action: more-info
                        entity: camera.front_door
            - column: 2
              entities:
                - title: Energy
                  entities:
                    - card: custom:mini-graph-card
                      cardOptions:
                        style: |
                          ha-card {
                            height: 100%;
                            transition: none;
                          }
                          .states {
                            position: absolute;
                            padding: 0 !important;
                            color: rgba(255, 255, 255, 0.6);
                          }
                          .states .state .state__value {
                            font-size: 2.4em !important;
                          }
                          .states .state .state__uom {
                            font-size: 1.4em !important;
                            line-height: 1.6em !important;
                          }
                        line_width: 3
                        points_per_hour: 30
                        height: 300
                        hours_to_show: 1
                        entities:
                          - entity: sensor.energy_usage
                            color: rgba(255, 255, 255, 0.6)
                        show:
                          name: false
                          icon: false
                          points: false
                          legend: false
                          labels: false
                        tap_action:
                          action: none
                        upper_bound: 7000
                        lower_bound: 0
                      wider: true
                      widerSize: 3
                      higher: true
                      higherSize: 2
                      conditionalClass: '[[[ return "custom-card graph" ]]]'
